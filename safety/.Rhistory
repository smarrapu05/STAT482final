<<<<<<< HEAD
rm(list=ls())
timeDF <- read.csv("C:/Users/Saketh/Documents/STAT482/time/railairdata.csv")
View(timeDF)
View(timeDF)
timeDF$HSR <- timeDF$Avg.rail.speed..km.h. > 200
plot(x=timeDF$Rail..hrs.,y=timeDF$Flight..hrs.)
par(mfrow=c(1,1))
plot(x=timeDF$Rail..hrs.,y=timeDF$Flight..hrs.)
plot(x=timeDF$Rail..hrs.,y=timeDF$Flight..hrs.,ylim=c(0,6))
plot(x=timeDF$Rail..hrs.,y=timeDF$Flight..hrs.,ylim=c(2,6))
plot(x=timeDF$Rail..hrs.,y=timeDF$Flight..hrs.,ylim=c(2,5))
plot(x=timeDF$Rail..hrs.,y=timeDF$Flight..hrs.,)
plot(x=timeDF$Rail..hrs.,y=timeDF$Flight..hrs.,pch=19,col="red")
plot(x=timeDF$Rail..hrs.,y=timeDF$Flight..hrs.,col="red")
plot(x=timeDF$Rail..hrs.,y=timeDF$Flight..hrs.,col=alpha("red",0.2))
plot(x=timeDF$Rail..hrs.,y=timeDF$Flight..hrs.,col=alpha(0.2))
plot(x=timeDF$Rail..hrs.,y=timeDF$Flight..hrs.,col="red")
install.packages("ggplot2")
library("ggplot2")
rm(list=ls())
library("ggplot2")
timeDF <- read.csv("C:/Users/Saketh/Documents/STAT482/time/railairdata.csv")
timeDF$HSR <- timeDF$Avg.rail.speed..km.h. > 200
ggplot(x=timeDF$Rail..hrs.,y=timeDF$Flight..hrs.)
ggplot(data=cbind(x=timeDF$Rail..hrs.y=timeDF$Flight..hrs.))
ggplot(data=cbind(timeDF$Rail..hrs.,timeDF$Flight..hrs.))
cbind(timeDF$Rail..hrs.,timeDF$Flight..hrs.)
ggplot(data=cbind(timeDF$Rail..hrs.,timeDF$Flight..hrs.),aes(x, y))
library("scales")
install.packages("scales")
install.packages("scales")
plot(x=timeDF$Rail..hrs.,y=timeDF$Flight..hrs.,alpha("red",alpha = 0.2),pch=19)
plot(x=timeDF$Rail..hrs.,y=timeDF$Flight..hrs.,col=alpha("red",alpha = 0.2),pch=19)
plot(x=timeDF$Rail..hrs.,y=timeDF$Flight..hrs.,col=alpha("red",alpha = 0.5),pch=19)
plot(x=timeDF$Rail..hrs.,y=timeDF$Flight..hrs.,col=alpha("red",alpha = 0.3),pch=19)
library(scales)
library("scales")
rm(list=ls())
library(scales)
timeDF <- read.csv("C:/Users/Saketh/Documents/STAT482/time/railairdata.csv")
timeDF$HSR <- timeDF$Avg.rail.speed..km.h. > 200
plot(x=timeDF$Rail..hrs.,y=timeDF$Flight..hrs.,col=alpha("red",alpha = 0.3),pch=19,main="Fig 3.1", )
plot(x=timeDF$Rail..hrs.,y=timeDF$Flight..hrs.,col=alpha("red",alpha = 0.3),pch=19,main="Fig 3.1",
ylab = "Flight Duration (hrs)", xlab = "Flight Duration (hrs)")
plot(x=timeDF$Rail..hrs.,y=timeDF$Flight..hrs.,col=alpha("red",alpha = 0.3),pch=19,main="Fig 3.1",
ylab = "Flight Duration (hrs)", xlab = "Rail Duration (hrs)")
group = as.factor(1:2)
group = as.factor(timeDF$HSR)
plot(x=timeDF$Rail..hrs.,y=timeDF$Flight..hrs.,col=alpha(group,alpha = 0.3),pch=19,main="Fig 3.1",
ylab = "Flight Duration (hrs)", xlab = "Rail Duration (hrs)")
plot(x=timeDF$Rail..hrs.,y=timeDF$Flight..hrs.,col=alpha(c("red","blue")[timeDF$HSR],alpha = 0.3),pch=19,main="Fig 3.1",
ylab = "Flight Duration (hrs)", xlab = "Rail Duration (hrs)")
plot(x=timeDF$Rail..hrs.,y=timeDF$Flight..hrs.,col=alpha(c("red","blue")[group],alpha = 0.3),pch=19,main="Fig 3.1",
ylab = "Flight Duration (hrs)", xlab = "Rail Duration (hrs)")
c("red","blue")[group]
c("red","blue")[FALSE]
c(3,2)[FALSE]
c(3,2)[group]
legend("topright",legend=c("High Speed Rail (>200 kmh)", "Conventional Rail (<200 kmh)"),col=c("blue","red"),pch=c(19,19))
source("C:/Users/Saketh/Documents/STAT482/time/captime.R")
plot(x=timeDF$Dist.km.,y=timeDF$Rail..hrs./timeDF$Flight..hrs.)
plot(x=timeDF$Dist.km.,y=timeDF$Rail..hrs./timeDF$Flight..hrs.,col=alpha(c("red","blue")[group],alpha = 0.3),pch=19)
lines(y=1)
abline(h=1)
abline(h=1,col="green")
source("C:/Users/Saketh/Documents/STAT482/time/captime.R")
plot(x=timeDF$Dist.km.,y=timeDF$Rail..hrs./timeDF$Flight..hrs.,col=alpha(c("red","blue")[group],alpha = 0.3),pch=19,
main="Fig 3.2", xlab="Distance (km)",ylab="Time Ratio (Rail/Flight) (hrs)")
abline(h=1,col="green")
legend("topleft",legend=c("High Speed Rail (>200 kmh)", "Conventional Rail (<200 kmh)"),col=c("blue","red"),pch=c(19,19))
source("C:/Users/Saketh/Documents/STAT482/time/captime.R")
sum(timeDF$HSR)
source("C:/Users/Saketh/Documents/STAT482/time/captime.R")
timeDF %>%
group_by(timeDF$HSR) %>%
summarise(mean = mean("Avg.rail.speed..km"))
timeDF %>%
group_by(timeDF$HSR) %>%
summarise(mean = mean(Avg.rail.speed..km))
timeDF %>%
group_by(timeDF$HSR) %>%
summarise(mean = mean(Avg.rail.speed..km))
timeDF %>%
group_by(timeDF$HSR) %>%
summarise(mean = mean(timeDF$Avg.rail.speed..km))
timeDF %>%
group_by(timeDF$HSR) %>%
summarise(mean = mean(Rail..hrs.))
rm(list=ls())
library(scales)
library(dplyr)
timeDF <- read.csv("C:/Users/Saketh/Documents/STAT482/time/railairdata.csv")
timeDF$HSR <- timeDF$Avg.rail.speed..km.h. > 200
group = as.factor(timeDF$HSR)
plot(x=timeDF$Rail..hrs.,y=timeDF$Flight..hrs.,col=alpha(c("red","blue")[group],alpha = 0.3),pch=19,main="Fig 3.1",
ylab = "Flight Duration (hrs)", xlab = "Rail Duration (hrs)")
source("C:/Users/Saketh/Documents/STAT482/time/captime.R")
rm(list=ls())
library(scales)
library(dplyr)
timeDF <- read.csv("C:/Users/Saketh/Documents/STAT482/time/railairdata.csv")
timeDF$HSR <- timeDF$Avg.rail.speed..km.h. > 200
group = as.factor(timeDF$HSR)
plot(x=timeDF$Rail..hrs.,y=timeDF$Flight..hrs.,col=alpha(c("red","blue")[group],alpha = 0.3),pch=19,main="Fig 3.1",
ylab = "Flight Duration (hrs)", xlab = "Rail Duration (hrs)")
abline(a=0,b=1,col="green")
legend("topright",legend=c("High Speed Rail (>200 kmh)", "Conventional Rail (<200 kmh)"),col=c("blue","red"),pch=c(19,19))
plot(x=timeDF$Dist.km.,y=timeDF$Rail..hrs./timeDF$Flight..hrs.,col=alpha(c("red","blue")[group],alpha = 0.3),pch=19,
main="Fig 3.2", xlab="Distance (km)",ylab="Time Ratio (Rail/Flight) (hrs)")
abline(h=1,col="green")
legend("topleft",legend=c("High Speed Rail (>200 kmh)", "Conventional Rail (<200 kmh)"),col=c("blue","red"),pch=c(19,19))
source("C:/Users/Saketh/Documents/STAT482/time/captime.R")
library(dplyr)
library(plotrix)
railpa <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/railpa.csv")
railpa <- railpa[,c(8,10,12)]
colnames(railpa)[3] <- "rail passengers (millions passenger-kilometers)"
rm(list=ls())
railpa <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/railpa.csv")
library(dplyr)
library(plotrix)
library(dplyr)
library(plotrix)
rm(list=ls())
railpa <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/railpa.csv")
source("C:/Users/troll/Documents/STAT482/safety/capsafety.R")
library(dplyr)
library(plotrix)
rm(list=ls())
railpa <- read.csv("C:/Users/troll/Documents/STAT482/safety/railpa.csv")
railpa <- railpa[,c(8,10,12)]
colnames(railpa)[3] <- "rail passengers (millions passenger-kilometers)"
roadpa <- read.csv("C:/Users/troll/Documents/STAT482/safety/roadpa.csv")
roadpa <- roadpa[,c(10,12,14)]
colnames(roadpa)[3] <- "road passengers (millions passenger-kilometers)"
railacc <- read.csv("C:/Users/troll/Documents/STAT482/safety/railaccidents.csv")
railacc <- railacc[,c(14,16,18)]
colnames(railacc)[3] <- "rail accidents"
roadacc <- read.csv("C:/Users/troll/Documents/STAT482/safety/roadaccidents.csv")
roadacc <- roadacc[,c(10,12,14)]
=======
<<<<<<< HEAD
points(safetyByYear$TIME_PERIOD,safetyByYear$ratio,col="red",pch=19)
abline(h=1,lty=2)
segments(x0 = fixtable$year,y0 = fixtable$lowlevel, y1=fixtable$highlevel,col = "blue", lwd = 2)
arrows(x0 = fixtable$year,y0 = fixtable$lowlevel, y1=fixtable$highlevel,col = "blue", angle = 90, code = 3, length = 0.05, lwd=2)
plot(safetyByYear$TIME_PERIOD,safetyByYear$ratio,ylim=c(-1,8),type="l",col="red")
points(safetyByYear$TIME_PERIOD,safetyByYear$ratio,col="red",pch=19)
abline(h=1,lty=2)
segments(x0 = fixtable$year,y0 = fixtable$lowlevel, y1=fixtable$highlevel,col = "blue", lwd = 2)
arrows(x0 = fixtable$year,y0 = fixtable$lowlevel, y1=fixtable$highlevel,col = "blue", angle = 90, code = 3, length = 0.05, lwd=2)
plot(safetyByYear$TIME_PERIOD,safetyByYear$ratio,ylim=c(-1,6),type="l",col="red")
points(safetyByYear$TIME_PERIOD,safetyByYear$ratio,col="red",pch=19)
abline(h=1,lty=2)
segments(x0 = fixtable$year,y0 = fixtable$lowlevel, y1=fixtable$highlevel,col = "blue", lwd = 2)
arrows(x0 = fixtable$year,y0 = fixtable$lowlevel, y1=fixtable$highlevel,col = "blue", angle = 90, code = 3, length = 0.05, lwd=2)
plot(safetyByYear$TIME_PERIOD,safetyByYear$ratio,ylim=c(0,6),type="l",col="red")
points(safetyByYear$TIME_PERIOD,safetyByYear$ratio,col="red",pch=19)
abline(h=1,lty=2)
segments(x0 = fixtable$year,y0 = fixtable$lowlevel, y1=fixtable$highlevel,col = "blue", lwd = 2)
arrows(x0 = fixtable$year,y0 = fixtable$lowlevel, y1=fixtable$highlevel,col = "blue", angle = 90, code = 3, length = 0.05, lwd=2)
plot(safetyByYear$TIME_PERIOD,safetyByYear$ratio,ylim=c(0,6),type="l",col="red",main="Ratio by Year")
points(safetyByYear$TIME_PERIOD,safetyByYear$ratio,col="red",pch=19)
abline(h=1,lty=2)
segments(x0 = fixtable$year,y0 = fixtable$lowlevel, y1=fixtable$highlevel,col = "blue", lwd = 2)
arrows(x0 = fixtable$year,y0 = fixtable$lowlevel, y1=fixtable$highlevel,col = "blue", angle = 90, code = 3, length = 0.05, lwd=2)
View(railpa)
rm(list=ls())
railpa <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/railpa.csv")
View(railpa)
library(dplyr)
library(plotrix)
rm(list=ls())
railpa <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/railpa.csv")
=======
>>>>>>> deddbfb11bf33c79125c641ba24e3c12407798e7
railpa <- railpa[,c(8,9,10,12)]
colnames(railpa)[3] <- "rail passengers (millions passenger-kilometers)"
roadpa <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/roadpa.csv")
roadpa <- roadpa[,c(10,11,12,14)]
colnames(roadpa)[3] <- "road passengers (millions passenger-kilometers)"
railacc <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/railaccidents.csv")
railacc <- railacc[,c(14,15,16,18)]
colnames(railacc)[3] <- "rail accidents"
roadacc <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/roadaccidents.csv")
roadacc <- roadacc[,c(10,11,12,14)]
<<<<<<< HEAD
View(roadpa)
=======
colnames(roadacc)[3] <- "road accidents"
allpa <- merge(railpa,roadpa,by=c("geo","TIME_PERIOD"),all = TRUE)
library(dplyr)
library(plotrix)
rm(list=ls())
railpa <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/railpa.csv")
railpa <- railpa[,c(8,10,12)]
colnames(railpa)[3] <- "rail passengers (millions passenger-kilometers)"
roadpa <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/roadpa.csv")
roadpa <- roadpa[,c(10,12,14)]
colnames(roadpa)[3] <- "road passengers (millions passenger-kilometers)"
railacc <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/railaccidents.csv")
railacc <- railacc[,c(14,16,18)]
colnames(railacc)[3] <- "rail accidents"
roadacc <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/roadaccidents.csv")
roadacc <- roadacc[,c(10,12,14)]
colnames(roadacc)[3] <- "road accidents"
allpa <- merge(railpa,roadpa,by=c("geo","TIME_PERIOD"),all = TRUE)
railaccallpa <- merge(railacc,allpa,by=c("geo","TIME_PERIOD"),all=TRUE)
safetyDFALL <- merge(roadacc,railaccallpa,by=c("geo","TIME_PERIOD"),all=TRUE)
safetyDF <- safetyDFALL[complete.cases(safetyDFALL),]
safetyDF$roadAccByVol <- safetyDF$`road accidents` / safetyDF$`road passengers (millions passenger-kilometers)`
safetyDF$railAccByVol <- safetyDF$`rail accidents` / safetyDF$`rail passengers (millions passenger-kilometers)`
safetyDF$ratio <- safetyDF$roadAccByVol / safetyDF$railAccByVol
safetyByYear <- safetyDF %>%
group_by(TIME_PERIOD) %>%
summarise(across(c(`road accidents`,`road passengers (millions passenger-kilometers)`,`rail accidents`,`rail passengers (millions passenger-kilometers)`),sum))
safetyByYear$roadAccByVol <- safetyByYear$`road accidents`/ safetyByYear$`road passengers (millions passenger-kilometers)`
safetyByYear$railAccByVol <- safetyByYear$`rail accidents` / safetyByYear$`rail passengers (millions passenger-kilometers)`
safetyByYear$ratio <- safetyByYear$roadAccByVol / safetyByYear$railAccByVol
plot(safetyByYear$TIME_PERIOD, safetyByYear$roadAccByVol,type="l",col="red",ylim=c(0,0.009),xlab="Year", ylab="accidents by volume")
lines(safetyByYear$TIME_PERIOD, safetyByYear$railAccByVol,type="l",col="blue")
points(safetyByYear$TIME_PERIOD, safetyByYear$roadAccByVol,col="red",pch=19)
points(safetyByYear$TIME_PERIOD, safetyByYear$railAccByVol,col="blue",pch=19)
legend("topright",legend=c("Road Accidents by Volume", "Rail Accidents by Volume"),col=c("red","blue"),pch=c(19,19))
safetyByGeo <- safetyDF %>%
group_by(geo) %>%
summarise(across(c(`road accidents`,`road passengers (millions passenger-kilometers)`,`rail accidents`,`rail passengers (millions passenger-kilometers)`),sum))
safetyByGeo$roadAccByVol <- safetyByGeo$`road accidents` / safetyByGeo$`road passengers (millions passenger-kilometers)`
safetyByGeo$railAccByVol <- safetyByGeo$`rail accidents` / safetyByGeo$`rail passengers (millions passenger-kilometers)`
safetyByGeo$ratio <- safetyByGeo$roadAccByVol / safetyByGeo$railAccByVol
top5 <- order(safetyByGeo$ratio, decreasing = TRUE)[1:5]
safetyByGeo$roadAccByVol[top5]
safetyByGeo$geo[top5]
safetyByGeo$railAccByVol[top5]
ncol(rbind(safetyByGeo$roadAccByVol[top5],safetyByGeo$railAccByVol[top5]))
length(safetyByGeo$geo[top5])
barplot( rbind(safetyByGeo$roadAccByVol[top5],safetyByGeo$railAccByVol[top5]), names.arg=safetyByGeo$geo[top5], beside = TRUE, col=c("red","blue"), legend.text=c("Road Accidents by Volume", "Rail Accidents by Volume"),args.legend = list(x = "topleft"))
bot5 <- order(safetyByGeo$ratio, decreasing = FALSE)[1:5]
safetyByGeo$roadAccByVol[bot5]
safetyByGeo$geo[bot5]
safetyByGeo$railAccByVol[bot5]
ncol(rbind(safetyByGeo$roadAccByVol[bot5],safetyByGeo$railAccByVol[bot5]))
length(safetyByGeo$geo[bot5])
barplot( rbind(safetyByGeo$roadAccByVol[bot5],safetyByGeo$railAccByVol[bot5]), names.arg=safetyByGeo$geo[bot5], beside = TRUE, col=c("red","blue"), legend.text=c("Road Accidents by Volume", "Rail Accidents by Volume"),args.legend = list(x = "topleft"))
View(safetyByGeo)
top5 <- order(safetyByGeo$ratio, decreasing = TRUE)[1:5]
safetyByGeo$roadAccByVol[top5]
safetyByGeo$geo[top5]
safetyByGeo$railAccByVol[top5]
ncol(rbind(safetyByGeo$roadAccByVol[top5],safetyByGeo$railAccByVol[top5]))
length(safetyByGeo$geo[top5])
barplot( rbind(safetyByGeo$roadAccByVol[top5],safetyByGeo$railAccByVol[top5]), names.arg=safetyByGeo$geo[top5], beside = TRUE, col=c("red","blue"), legend.text=c("Road Accidents by Volume", "Rail Accidents by Volume"),args.legend = list(x = "topleft"))
barplot( rbind(safetyByGeo$roadAccByVol[top5],safetyByGeo$railAccByVol[top5]), names.arg=paste0(safetyByGeo$geo[top5],"\n",safetyByGeo$ratio[top5]), beside = TRUE, col=c("red","blue"), legend.text=c("Road Accidents by Volume", "Rail Accidents by Volume"),args.legend = list(x = "topleft"))
barplot( rbind(safetyByGeo$roadAccByVol[top5],safetyByGeo$railAccByVol[top5]), names.arg=paste0(safetyByGeo$geo[top5],"\n",round(safetyByGeo$ratio[top5],digits=3), beside = TRUE, col=c("red","blue"), legend.text=c("Road Accidents by Volume", "Rail Accidents by Volume"),args.legend = list(x = "topleft"))
length(safetyByGeo$geo[top5])
barplot( rbind(safetyByGeo$roadAccByVol[top5],safetyByGeo$railAccByVol[top5]), names.arg=paste0(safetyByGeo$geo[top5],"\n",round(safetyByGeo$ratio[top5],digits=3), beside = TRUE, col=c("red","blue"), legend.text=c("Road Accidents by Volume", "Rail Accidents by Volume"),args.legend = list(x = "topleft"))
barplot( rbind(safetyByGeo$roadAccByVol[top5],safetyByGeo$railAccByVol[top5]), names.arg=paste0(safetyByGeo$geo[top5],"\n",round(safetyByGeo$ratio[top5],digits=3)), beside = TRUE, col=c("red","blue"), legend.text=c("Road Accidents by Volume", "Rail Accidents by Volume"),args.legend = list(x = "topleft"))
paste0(safetyByGeo$geo[top5],"\n",round(safetyByGeo$ratio[top5],digits=3))
barplot( rbind(safetyByGeo$roadAccByVol[top5],safetyByGeo$railAccByVol[top5]), names.arg=paste0(safetyByGeo$geo[top5],"\n",round(safetyByGeo$ratio[top5],digits=3)), beside = TRUE, col=c("red","blue"), legend.text=c("Road Accidents by Volume", "Rail Accidents by Volume"),args.legend = list(x = "topleft"))
barplot( rbind(safetyByGeo$roadAccByVol[bot5],safetyByGeo$railAccByVol[bot5]), names.arg=paste0(safetyByGeo$geo[bot5],"\n",round(safetyByGeo$ratio[bot5],digits=3)), beside = TRUE, col=c("red","blue"), legend.text=c("Road Accidents by Volume", "Rail Accidents by Volume"),args.legend = list(x = "topleft"))
barplot( rbind(safetyByGeo$roadAccByVol[top5],safetyByGeo$railAccByVol[top5]),
names.arg=paste0(safetyByGeo$geo[top5],"\n",round(safetyByGeo$ratio[top5],digits=3)),
beside = TRUE, col=c("red","blue"), legend.text=c("Road Accidents by Volume", "Rail Accidents by Volume"),
args.legend = list(x = "topleft"))
barplot( rbind(safetyByGeo$roadAccByVol[bot5],safetyByGeo$railAccByVol[bot5]),
names.arg=paste0(safetyByGeo$geo[bot5],"\n",round(safetyByGeo$ratio[bot5],digits=3)),
beside = TRUE, col=c("red","blue"), legend.text=c("Road Accidents by Volume", "Rail Accidents by Volume"),
args.legend = list(x = "topleft"))
barplot( rbind(safetyByGeo$roadAccByVol[bot5],safetyByGeo$railAccByVol[bot5]),
names.arg=paste0(safetyByGeo$geo[bot5],"\n",round(safetyByGeo$ratio[bot5],digits=3)),
beside = TRUE, col=c("red","blue"), legend.text=c("Road Accidents by Volume", "Rail Accidents by Volume"),
args.legend = list(x = "topright"))
barplot( rbind(safetyByGeo$roadAccByVol[top5],safetyByGeo$railAccByVol[top5]),
names.arg=paste0(safetyByGeo$geo[top5],"\n",round(safetyByGeo$ratio[top5],digits=3)),
beside = TRUE, col=c("red","blue"), legend.text=c("Road Accidents by Volume", "Rail Accidents by Volume"),
args.legend = list(x = "topleft"))
barplot( rbind(safetyByGeo$roadAccByVol[bot5],safetyByGeo$railAccByVol[bot5]),
names.arg=paste0(safetyByGeo$geo[bot5],"\n",round(safetyByGeo$ratio[bot5],digits=3)),
beside = TRUE, col=c("red","blue"), legend.text=c("Road Accidents by Volume", "Rail Accidents by Volume"),
args.legend = list(x = "topright"))
barplot( rbind(safetyByGeo$roadAccByVol[top5],safetyByGeo$railAccByVol[top5]),
names.arg=paste0(safetyByGeo$geo[top5],"\n",round(safetyByGeo$ratio[top5],digits=3)),
beside = TRUE, col=c("red","blue"), legend.text=c("Road Accidents by Volume", "Rail Accidents by Volume"),
args.legend = list(x = "topleft"))
plot(safetyByYear$TIME_PERIOD, safetyByYear$roadAccByVol,type="l",col="red",ylim=c(0,0.009),xlab="Year", ylab="accidents by volume")
lines(safetyByYear$TIME_PERIOD, safetyByYear$railAccByVol,type="l",col="blue")
points(safetyByYear$TIME_PERIOD, safetyByYear$roadAccByVol,col="red",pch=19)
points(safetyByYear$TIME_PERIOD, safetyByYear$railAccByVol,col="blue",pch=19)
legend("topright",legend=c("Road Accidents by Volume", "Rail Accidents by Volume"),col=c("red","blue"),pch=c(19,19))
plot(safetyByYear$TIME_PERIOD, safetyByYear$roadAccByVol,type="l",col="red",ylim=c(0,0.009),xlab="Year", ylab="accidents by volume",lab="Fig 2.1")
plot(safetyByYear$TIME_PERIOD, safetyByYear$roadAccByVol,type="l",col="red",ylim=c(0,0.009),xlab="Year", ylab="accidents by volume",main="Fig 2.1")
plot(safetyByYear$TIME_PERIOD, safetyByYear$roadAccByVol,type="l",col="red",ylim=c(0,0.009),xlab="Year", ylab="accidents by volume",main="Fig 2.1")
lines(safetyByYear$TIME_PERIOD, safetyByYear$railAccByVol,type="l",col="blue")
points(safetyByYear$TIME_PERIOD, safetyByYear$roadAccByVol,col="red",pch=19)
points(safetyByYear$TIME_PERIOD, safetyByYear$railAccByVol,col="blue",pch=19)
legend("topright",legend=c("Road Accidents by Volume", "Rail Accidents by Volume"),col=c("red","blue"),pch=c(19,19))
barplot( rbind(safetyByGeo$roadAccByVol[bot5],safetyByGeo$railAccByVol[bot5]),
names.arg=paste0(safetyByGeo$geo[bot5],"\n",round(safetyByGeo$ratio[bot5],digits=3)),
beside = TRUE, col=c("red","blue"), legend.text=c("Road Accidents by Volume", "Rail Accidents by Volume"),
args.legend = list(x = "topright"),main="Fig 2.3")
barplot( rbind(safetyByGeo$roadAccByVol[top5],safetyByGeo$railAccByVol[top5]),
names.arg=paste0(safetyByGeo$geo[top5],"\n",round(safetyByGeo$ratio[top5],digits=3)),
beside = TRUE, col=c("red","blue"), legend.text=c("Road Accidents by Volume", "Rail Accidents by Volume"),
args.legend = list(x = "topleft"),main="Fig 2.2")
View(safetyByYear)
barplot( rbind(safetyByGeo$roadAccByVol[bot5],safetyByGeo$railAccByVol[bot5]),
names.arg=paste0(safetyByGeo$geo[bot5],"\n",round(safetyByGeo$ratio[bot5],digits=3)),
beside = TRUE, col=c("red","blue"), legend.text=c("Road Accidents by Volume", "Rail Accidents by Volume"),
args.legend = list(x = "topright"),main="Fig 2.3")
barplot( rbind(safetyByGeo$roadAccByVol[bot5],safetyByGeo$railAccByVol[bot5]),
names.arg=paste0(safetyByGeo$geo[bot5],"\n",round(safetyByGeo$ratio[bot5],digits=3)),
beside = TRUE, col=c("red","blue"), legend.text=c("Road Accidents by Volume", "Rail Accidents by Volume"),
args.legend = list(x = "topright"),main="Fig 2.2")
par(mfrow = c(2,1))
barplot( rbind(safetyByGeo$roadAccByVol[top5],safetyByGeo$railAccByVol[top5]),
names.arg=paste0(safetyByGeo$geo[top5],"\n",round(safetyByGeo$ratio[top5],digits=3)),
beside = TRUE, col=c("red","blue"), legend.text=c("Road Accidents by Volume", "Rail Accidents by Volume"),
args.legend = list(x = "topleft"),main="Fig 2.2")
barplot( rbind(safetyByGeo$roadAccByVol[bot5],safetyByGeo$railAccByVol[bot5]),
names.arg=paste0(safetyByGeo$geo[bot5],"\n",round(safetyByGeo$ratio[bot5],digits=3)),
beside = TRUE, col=c("red","blue"), legend.text=c("Road Accidents by Volume", "Rail Accidents by Volume"),
args.legend = list(x = "topright"),main="Fig 2.3")
par(mfrow = c(1,2))
barplot( rbind(safetyByGeo$roadAccByVol[top5],safetyByGeo$railAccByVol[top5]),
names.arg=paste0(safetyByGeo$geo[top5],"\n",round(safetyByGeo$ratio[top5],digits=3)),
beside = TRUE, col=c("red","blue"), legend.text=c("Road Accidents by Volume", "Rail Accidents by Volume"),
args.legend = list(x = "topleft"),main="Fig 2.2")
barplot( rbind(safetyByGeo$roadAccByVol[bot5],safetyByGeo$railAccByVol[bot5]),
names.arg=paste0(safetyByGeo$geo[bot5],"\n",round(safetyByGeo$ratio[bot5],digits=3)),
beside = TRUE, col=c("red","blue"), legend.text=c("Road Accidents by Volume", "Rail Accidents by Volume"),
args.legend = list(x = "topright"),main="Fig 2.3")
barplot( rbind(safetyByGeo$roadAccByVol[top5],safetyByGeo$railAccByVol[top5]),
names.arg=paste0(safetyByGeo$geo[top5],"\n",round(safetyByGeo$ratio[top5],digits=3)),
beside = TRUE, col=c("red","blue"), legend.text=c("Road Acc by Volume", "Rail Acc by Volume"),
args.legend = list(x = "topleft"),main="Fig 2.2")
barplot( rbind(safetyByGeo$roadAccByVol[bot5],safetyByGeo$railAccByVol[bot5]),
names.arg=paste0(safetyByGeo$geo[bot5],"\n",round(safetyByGeo$ratio[bot5],digits=3)),
beside = TRUE, col=c("red","blue"), legend.text=c("Road Acc by Volume", "Rail Acc by Volume"),
args.legend = list(x = "topright"),main="Fig 2.3")
>>>>>>> deddbfb11bf33c79125c641ba24e3c12407798e7
View(roadacc)
>>>>>>> 3196d8a12c7056b86411c197eda1a3eacbdc1f1f
colnames(roadacc)[3] <- "road accidents"
library(dplyr)
library(plotrix)
rm(list=ls())
railpa <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/railpa.csv")
railpa <- railpa[,c(8,9,10,12)]
colnames(railpa)[4] <- "rail passengers (millions passenger-kilometers)"
roadpa <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/roadpa.csv")
roadpa <- roadpa[,c(10,11,12,14)]
colnames(roadpa)[4] <- "road passengers (millions passenger-kilometers)"
railacc <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/railaccidents.csv")
railacc <- railacc[,c(14,15,16,18)]
colnames(railacc)[4] <- "rail accidents"
roadacc <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/roadaccidents.csv")
roadacc <- roadacc[,c(10,11,12,14)]
colnames(roadacc)[4] <- "road accidents"
View(roadpa)
allpa <- merge(railpa,roadpa,by=c("geo","TIME_PERIOD"),all = TRUE)
railaccallpa <- merge(railacc,allpa,by=c("geo","TIME_PERIOD"),all=TRUE)
safetyDFALL <- merge(roadacc,railaccallpa,by=c("geo","TIME_PERIOD"),all=TRUE)
View(safetyDFALL)
library(dplyr)
library(plotrix)
rm(list=ls())
railpa <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/railpa.csv")
railpa <- railpa[,c(8,9,10,12)]
colnames(railpa)[2] <- "country"
colnames(railpa)[4] <- "rail passengers (millions passenger-kilometers)"
roadpa <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/roadpa.csv")
roadpa <- roadpa[,c(10,11,12,14)]
colnames(roadpa)[2] <- "country"
colnames(roadpa)[4] <- "road passengers (millions passenger-kilometers)"
railacc <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/railaccidents.csv")
railacc <- railacc[,c(14,15,16,18)]
colnames(railacc)[2] <- "country"
colnames(railacc)[4] <- "rail accidents"
roadacc <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/roadaccidents.csv")
roadacc <- roadacc[,c(10,11,12,14)]
colnames(roadacc)[2] <- "country"
colnames(roadacc)[4] <- "road accidents"
allpa <- merge(railpa,roadpa,by=c("geo","TIME_PERIOD"),all = TRUE)
railaccallpa <- merge(railacc,allpa,by=c("geo","TIME_PERIOD"),all=TRUE)
safetyDFALL <- merge(roadacc,railaccallpa,by=c("geo","TIME_PERIOD"),all=TRUE)
View(safetyDFALL)
library(dplyr)
library(plotrix)
rm(list=ls())
railpa <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/railpa.csv")
railpa <- railpa[,c(8,9,10,12)]
colnames(railpa)[2] <- "country"
colnames(railpa)[4] <- "rail passengers (millions passenger-kilometers)"
roadpa <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/roadpa.csv")
roadpa <- roadpa[,c(10,11,12,14)]
colnames(roadpa)[2] <- "country"
colnames(roadpa)[4] <- "road passengers (millions passenger-kilometers)"
railacc <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/railaccidents.csv")
railacc <- railacc[,c(14,15,16,18)]
colnames(railacc)[2] <- "country"
colnames(railacc)[4] <- "rail accidents"
roadacc <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/roadaccidents.csv")
roadacc <- roadacc[,c(10,11,12,14)]
colnames(roadacc)[2] <- "country"
colnames(roadacc)[4] <- "road accidents"
allpa <- merge(railpa,roadpa,by=c("geo","TIME_PERIOD","country"),all = TRUE)
railaccallpa <- merge(railacc,allpa,by=c("geo","TIME_PERIOD","country"),all=TRUE)
safetyDFALL <- merge(roadacc,railaccallpa,by=c("geo","TIME_PERIOD","country"),all=TRUE)
safetyDF <- safetyDFALL[complete.cases(safetyDFALL),]
safetyDF$roadAccByVol <- safetyDF$`road accidents` / safetyDF$`road passengers (millions passenger-kilometers)`
safetyDF$railAccByVol <- safetyDF$`rail accidents` / safetyDF$`rail passengers (millions passenger-kilometers)`
safetyDF$ratio <- safetyDF$roadAccByVol / safetyDF$railAccByVol
View(safetyDF)
library(dplyr)
library(plotrix)
rm(list=ls())
railpa <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/railpa.csv")
railpa <- railpa[,c(8,9,10,12)]
colnames(railpa)[2] <- "country"
colnames(railpa)[4] <- "rail passengers (millions passenger-kilometers)"
roadpa <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/roadpa.csv")
roadpa <- roadpa[,c(10,11,12,14)]
colnames(roadpa)[2] <- "country"
colnames(roadpa)[4] <- "road passengers (millions passenger-kilometers)"
railacc <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/railaccidents.csv")
railacc <- railacc[,c(14,15,16,18)]
colnames(railacc)[2] <- "country"
colnames(railacc)[4] <- "rail accidents"
roadacc <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/roadaccidents.csv")
roadacc <- roadacc[,c(10,11,12,14)]
colnames(roadacc)[2] <- "country"
colnames(roadacc)[4] <- "road accidents"
allpa <- merge(railpa,roadpa,by=c("geo","country","TIME_PERIOD"),all = TRUE)
railaccallpa <- merge(railacc,allpa,by=c("geo","country","TIME_PERIOD"),all=TRUE)
safetyDFALL <- merge(roadacc,railaccallpa,by=c("geo","country","TIME_PERIOD"),all=TRUE)
safetyDF <- safetyDFALL[complete.cases(safetyDFALL),]
safetyDF$roadAccByVol <- safetyDF$`road accidents` / safetyDF$`road passengers (millions passenger-kilometers)`
safetyDF$railAccByVol <- safetyDF$`rail accidents` / safetyDF$`rail passengers (millions passenger-kilometers)`
safetyDF$ratio <- safetyDF$roadAccByVol / safetyDF$railAccByVol
safetyByYear <- safetyDF %>%
group_by(TIME_PERIOD) %>%
summarise(across(c(`road accidents`,`road passengers (millions passenger-kilometers)`,`rail accidents`,`rail passengers (millions passenger-kilometers)`),sum))
safetyByYear$roadAccByVol <- safetyByYear$`road accidents`/ safetyByYear$`road passengers (millions passenger-kilometers)`
safetyByYear$railAccByVol <- safetyByYear$`rail accidents` / safetyByYear$`rail passengers (millions passenger-kilometers)`
safetyByYear$ratio <- safetyByYear$roadAccByVol / safetyByYear$railAccByVol
plot(safetyByYear$TIME_PERIOD, safetyByYear$roadAccByVol,type="l",col="red",ylim=c(0,0.009),xlab="Year", ylab="accidents by volume",main="Fig 2.1")
lines(safetyByYear$TIME_PERIOD, safetyByYear$railAccByVol,type="l",col="blue")
points(safetyByYear$TIME_PERIOD, safetyByYear$roadAccByVol,col="red",pch=19)
points(safetyByYear$TIME_PERIOD, safetyByYear$railAccByVol,col="blue",pch=19)
legend("topright",legend=c("Road Accidents by Volume", "Rail Accidents by Volume"),col=c("red","blue"),pch=c(19,19))
safetyByGeo <- safetyDF %>%
group_by(geo) %>%
summarise(across(c(`road accidents`,`road passengers (millions passenger-kilometers)`,`rail accidents`,`rail passengers (millions passenger-kilometers)`),sum))
safetyByGeo$roadAccByVol <- safetyByGeo$`road accidents` / safetyByGeo$`road passengers (millions passenger-kilometers)`
safetyByGeo$railAccByVol <- safetyByGeo$`rail accidents` / safetyByGeo$`rail passengers (millions passenger-kilometers)`
safetyByGeo$ratio <- safetyByGeo$roadAccByVol / safetyByGeo$railAccByVol
top5 <- order(safetyByGeo$ratio, decreasing = TRUE)[1:5]
safetyByGeo$roadAccByVol[top5]
safetyByGeo$geo[top5]
safetyByGeo$railAccByVol[top5]
ncol(rbind(safetyByGeo$roadAccByVol[top5],safetyByGeo$railAccByVol[top5]))
length(safetyByGeo$geo[top5])
par(mfrow = c(1,2))
barplot( rbind(safetyByGeo$roadAccByVol[top5],safetyByGeo$railAccByVol[top5]),
names.arg=paste0(safetyByGeo$geo[top5],"\n",round(safetyByGeo$ratio[top5],digits=3)),
beside = TRUE, col=c("red","blue"), legend.text=c("Road Acc by Volume", "Rail Acc by Volume"),
args.legend = list(x = "topleft"),main="Fig 2.2")
bot5 <- order(safetyByGeo$ratio, decreasing = FALSE)[1:5]
safetyByGeo$roadAccByVol[bot5]
safetyByGeo$geo[bot5]
safetyByGeo$railAccByVol[bot5]
ncol(rbind(safetyByGeo$roadAccByVol[bot5],safetyByGeo$railAccByVol[bot5]))
length(safetyByGeo$geo[bot5])
barplot( rbind(safetyByGeo$roadAccByVol[bot5],safetyByGeo$railAccByVol[bot5]),
names.arg=paste0(safetyByGeo$geo[bot5],"\n",round(safetyByGeo$ratio[bot5],digits=3)),
beside = TRUE, col=c("red","blue"), legend.text=c("Road Acc by Volume", "Rail Acc by Volume"),
args.legend = list(x = "topright"),main="Fig 2.3")
safetyyrsplit <- split(safetyDF,safetyDF$TIME_PERIOD)
safetyt <- function(df){
return(t.test(df$ratio,mu=1,alternative="greater"))
}
safetyt2side <- function(df){
return(t.test(df$ratio,mu=1))
}
tlist <- sapply(safetyyrsplit,safetyt)
tsig <- tlist[3,] < 0.05
tlist2side <- sapply(safetyyrsplit,safetyt2side)
viztable <-cbind(tlist[3,],tsig,tlist[2,],tlist2side[4,])
colnames(viztable) <- c("p val", "significant", "n-1","confidence interval")
safetyyrsplit[["2009"]]
write.csv(viztable, "C:/Users/Saketh/Documents/STAT482/safety/viztable.csv")
fixtable <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/viztablemodded.csv")
fixtable <- fixtable %>%
rowwise() %>%
mutate(CI = list(c(lowlevel,highlevel))) %>%
ungroup()
par(mfrow=c(1,1))
plot(safetyByYear$TIME_PERIOD,safetyByYear$ratio,ylim=c(0,6),type="l",col="red",main="Ratio by Year")
points(safetyByYear$TIME_PERIOD,safetyByYear$ratio,col="red",pch=19)
abline(h=1,lty=2)
segments(x0 = fixtable$year,y0 = fixtable$lowlevel, y1=fixtable$highlevel,col = "blue", lwd = 2)
arrows(x0 = fixtable$year,y0 = fixtable$lowlevel, y1=fixtable$highlevel,col = "blue", angle = 90, code = 3, length = 0.05, lwd=2)
unique(safetyDF$country)
length(unique(safetyDF$country))
unique(safetyDF$TIME_PERIOD)
min(safetyDF$TIME_PERIOD)
max(safetyDF$TIME_PERIOD)
CRI <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/CRI.csv")
GDP <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/gdpdata.csv")
View(CRI)
CRI <- CRI[,c(2,3)]
View(CRI)
library(tidyr)
View(GDP)
GDP <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/gdpdata.csv")
GDPLong <- GDP %>%
pivot_longer(
cols = starts_with("20"),
names_to = "year",
values_to = "gdp"
)
GDPLong <- GDP %>%
pivot_longer(
cols = starts_with("X20"),
names_to = "year",
values_to = "gdp"
)
View(GDPLong)
GDPLong <- GDP %>%
pivot_longer(
cols = starts_with("X20"),
names_to = "year",
values_to = "gdp"
) %>%
mutate(year = as.integer(sub("X","",year)))
colnames(GDPLong)[1] <- "country"
colnames(CRI)[1] <- "country"
CRIMerge <- merge(safetyDFALL,CRI,by="country")
View(CRIMerge)
GDP <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/gdpdata.csv")
GDPLong <- GDP %>%
pivot_longer(
cols = starts_with("X20"),
names_to = "TIME_PERIOD",
values_to = "gdp"
) %>%
mutate(TIME_PERIOD = as.integer(sub("X","",TIME_PERIOD)))
colnames(GDPLong)[1] <- "country"
GDPMerge <- merge(CRIMerge,GDPLong,by=c("country","TIME_PERIOD"),all=TRUE)
View(GDPMerge)
safetyDF <- GDPMerge[complete.cases(GDPMerge),]
library(dplyr)
library(tidyr)
library(plotrix)
rm(list=ls())
railpa <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/railpa.csv")
railpa <- railpa[,c(8,9,10,12)]
colnames(railpa)[2] <- "country"
colnames(railpa)[4] <- "rail passengers (millions passenger-kilometers)"
roadpa <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/roadpa.csv")
roadpa <- roadpa[,c(10,11,12,14)]
colnames(roadpa)[2] <- "country"
colnames(roadpa)[4] <- "road passengers (millions passenger-kilometers)"
railacc <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/railaccidents.csv")
railacc <- railacc[,c(14,15,16,18)]
colnames(railacc)[2] <- "country"
colnames(railacc)[4] <- "rail accidents"
roadacc <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/roadaccidents.csv")
roadacc <- roadacc[,c(10,11,12,14)]
colnames(roadacc)[2] <- "country"
colnames(roadacc)[4] <- "road accidents"
CRI <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/CRI.csv")
CRI <- CRI[,c(2,3)]
colnames(CRI)[1] <- "country"
GDP <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/gdpdata.csv")
GDPLong <- GDP %>%
pivot_longer(
cols = starts_with("X20"),
names_to = "TIME_PERIOD",
values_to = "gdp"
) %>%
mutate(TIME_PERIOD = as.integer(sub("X","",TIME_PERIOD)))
colnames(GDPLong)[1] <- "country"
allpa <- merge(railpa,roadpa,by=c("geo","country","TIME_PERIOD"),all = TRUE)
railaccallpa <- merge(railacc,allpa,by=c("geo","country","TIME_PERIOD"),all=TRUE)
safetyDFALL <- merge(roadacc,railaccallpa,by=c("geo","country","TIME_PERIOD"),all=TRUE)
CRIMerge <- merge(safetyDFALL,CRI,by="country")
GDPMerge <- merge(CRIMerge,GDPLong,by=c("country","TIME_PERIOD"),all=TRUE)
safetyDF <- GDPMerge[complete.cases(GDPMerge),]
safetyDF$roadAccByVol <- safetyDF$`road accidents` / safetyDF$`road passengers (millions passenger-kilometers)`
safetyDF$railAccByVol <- safetyDF$`rail accidents` / safetyDF$`rail passengers (millions passenger-kilometers)`
safetyDF$ratio <- safetyDF$roadAccByVol / safetyDF$railAccByVol
safetyByYear <- safetyDF %>%
group_by(TIME_PERIOD) %>%
summarise(across(c(`road accidents`,`road passengers (millions passenger-kilometers)`,`rail accidents`,`rail passengers (millions passenger-kilometers)`),sum))
safetyByYear$roadAccByVol <- safetyByYear$`road accidents`/ safetyByYear$`road passengers (millions passenger-kilometers)`
safetyByYear$railAccByVol <- safetyByYear$`rail accidents` / safetyByYear$`rail passengers (millions passenger-kilometers)`
safetyByYear$ratio <- safetyByYear$roadAccByVol / safetyByYear$railAccByVol
plot(safetyByYear$TIME_PERIOD, safetyByYear$roadAccByVol,type="l",col="red",ylim=c(0,0.009),xlab="Year", ylab="accidents by volume",main="Fig 2.1")
lines(safetyByYear$TIME_PERIOD, safetyByYear$railAccByVol,type="l",col="blue")
points(safetyByYear$TIME_PERIOD, safetyByYear$roadAccByVol,col="red",pch=19)
points(safetyByYear$TIME_PERIOD, safetyByYear$railAccByVol,col="blue",pch=19)
legend("topright",legend=c("Road Accidents by Volume", "Rail Accidents by Volume"),col=c("red","blue"),pch=c(19,19))
safetyByGeo <- safetyDF %>%
group_by(geo) %>%
summarise(across(c(`road accidents`,`road passengers (millions passenger-kilometers)`,`rail accidents`,`rail passengers (millions passenger-kilometers)`),sum))
safetyByGeo$roadAccByVol <- safetyByGeo$`road accidents` / safetyByGeo$`road passengers (millions passenger-kilometers)`
safetyByGeo$railAccByVol <- safetyByGeo$`rail accidents` / safetyByGeo$`rail passengers (millions passenger-kilometers)`
safetyByGeo$ratio <- safetyByGeo$roadAccByVol / safetyByGeo$railAccByVol
top5 <- order(safetyByGeo$ratio, decreasing = TRUE)[1:5]
safetyByGeo$roadAccByVol[top5]
safetyByGeo$geo[top5]
safetyByGeo$railAccByVol[top5]
ncol(rbind(safetyByGeo$roadAccByVol[top5],safetyByGeo$railAccByVol[top5]))
length(safetyByGeo$geo[top5])
par(mfrow = c(1,2))
barplot( rbind(safetyByGeo$roadAccByVol[top5],safetyByGeo$railAccByVol[top5]),
names.arg=paste0(safetyByGeo$geo[top5],"/n",round(safetyByGeo$ratio[top5],digits=3)),
beside = TRUE, col=c("red","blue"), legend.text=c("Road Acc by Volume", "Rail Acc by Volume"),
args.legend = list(x = "topleft"),main="Fig 2.2")
bot5 <- order(safetyByGeo$ratio, decreasing = FALSE)[1:5]
safetyByGeo$roadAccByVol[bot5]
safetyByGeo$geo[bot5]
safetyByGeo$railAccByVol[bot5]
ncol(rbind(safetyByGeo$roadAccByVol[bot5],safetyByGeo$railAccByVol[bot5]))
length(safetyByGeo$geo[bot5])
barplot( rbind(safetyByGeo$roadAccByVol[bot5],safetyByGeo$railAccByVol[bot5]),
names.arg=paste0(safetyByGeo$geo[bot5],"/n",round(safetyByGeo$ratio[bot5],digits=3)),
beside = TRUE, col=c("red","blue"), legend.text=c("Road Acc by Volume", "Rail Acc by Volume"),
args.legend = list(x = "topright"),main="Fig 2.3")
safetyyrsplit <- split(safetyDF,safetyDF$TIME_PERIOD)
safetyt <- function(df){
return(t.test(df$ratio,mu=1,alternative="greater"))
}
safetyt2side <- function(df){
return(t.test(df$ratio,mu=1))
}
tlist <- sapply(safetyyrsplit,safetyt)
tsig <- tlist[3,] < 0.05
tlist2side <- sapply(safetyyrsplit,safetyt2side)
viztable <-cbind(tlist[3,],tsig,tlist[2,],tlist2side[4,])
colnames(viztable) <- c("p val", "significant", "n-1","confidence interval")
safetyyrsplit[["2009"]]
write.csv(viztable, "C:/Users/Saketh/Documents/STAT482/safety/viztable.csv")
fixtable <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/viztablemodded.csv")
fixtable <- fixtable %>%
rowwise() %>%
mutate(CI = list(c(lowlevel,highlevel))) %>%
ungroup()
par(mfrow=c(1,1))
plot(safetyByYear$TIME_PERIOD,safetyByYear$ratio,ylim=c(0,6),type="l",col="red",main="Ratio by Year")
points(safetyByYear$TIME_PERIOD,safetyByYear$ratio,col="red",pch=19)
abline(h=1,lty=2)
segments(x0 = fixtable$year,y0 = fixtable$lowlevel, y1=fixtable$highlevel,col = "blue", lwd = 2)
arrows(x0 = fixtable$year,y0 = fixtable$lowlevel, y1=fixtable$highlevel,col = "blue", angle = 90, code = 3, length = 0.05, lwd=2)
area <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/area.csv")
View(area)
area <- area[,c(6,7)]
area <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/area.csv")
area <- area[,c(6,8)]
colnames(area) <- c("geo","area")
for(i in 1:length(area$geo)){
area$geo[i] <- area$geo[i][1:2]
}
warnings()
area$geo[1]
area$geo[1][1:2]
area$geo[1][[1]]
substr(area$geo[1],1,2)
for(i in 1:length(area$geo)){
area$geo[i] <- substr(area$geo[i],1,2)
}
areaMerge <- merge(GDPMerge,area,by="geo",all=TRUE)
safetyDF <- areaMerge[complete.cases(GDPMerge),]
View(safetyDF)
View(safetyDF)
safetyDF <- areaMerge[complete.cases(areaMerge),]
library(dplyr)
<<<<<<< HEAD
colnames(railacc)[4] <- "rail accidents"
roadacc <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/roadaccidents.csv")
roadacc <- roadacc[,c(10,11,12,14)]
colnames(roadacc)[2] <- "country"
colnames(roadacc)[4] <- "road accidents"
CRI <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/CRI.csv")
CRI <- CRI[,c(2,3)]
colnames(CRI)[1] <- "country"
GDP <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/gdpdata.csv")
=======
timeDF <- read.csv("C:/Users/troll/Documents/STAT482/time/railairdata.csv")
timeDF$HSR <- timeDF$Avg.rail.speed..km.h. > 200
group = as.factor(timeDF$HSR)
plot(x=timeDF$Rail..hrs.,y=timeDF$Flight..hrs.,col=alpha(c("red","blue")[group],alpha = 0.3),pch=19,main="Fig 3.1",
ylab = "Flight Duration (hrs)", xlab = "Rail Duration (hrs)")
abline(a=0,b=1,col="green")
legend("topright",legend=c("High Speed Rail (>200 kmh)", "Conventional Rail (<200 kmh)"),col=c("blue","red"),pch=c(19,19))
plot(x=timeDF$Dist.km.,y=timeDF$Rail..hrs./timeDF$Flight..hrs.,col=alpha(c("red","blue")[group],alpha = 0.3),pch=19,
main="Fig 3.2", xlab="Distance (km)",ylab="Time Ratio (Rail/Flight) (hrs)")
abline(h=1,col="green")
legend("topleft",legend=c("High Speed Rail (>200 kmh)", "Conventional Rail (<200 kmh)"),col=c("blue","red"),pch=c(19,19))
View(timeDF)
t.test(timeDF$Rail..hrs.,timeDF$Flight..hrs.,paired=TRUE)
library(dplyr)
colnames(railacc)[4] <- "rail accidents"
roadacc <- read.csv("C:/Users/troll/Documents/STAT482/safety/roadaccidents.csv")
roadacc <- roadacc[,c(10,11,12,14)]
colnames(roadacc)[2] <- "country"
colnames(roadacc)[4] <- "road accidents"
CRI <- read.csv("C:/Users/troll/Documents/STAT482/safety/CRI.csv")
CRI <- CRI[,c(2,3)]
colnames(CRI)[1] <- "country"
GDP <- read.csv("C:/Users/troll/Documents/STAT482/safety/gdpdata.csv")
>>>>>>> deddbfb11bf33c79125c641ba24e3c12407798e7
GDPLong <- GDP %>%
pivot_longer(
cols = starts_with("X20"),
names_to = "TIME_PERIOD",
values_to = "gdp"
) %>%
mutate(TIME_PERIOD = as.integer(sub("X","",TIME_PERIOD)))
colnames(GDPLong)[1] <- "country"
<<<<<<< HEAD
area <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/area.csv")
=======
area <- read.csv("C:/Users/troll/Documents/STAT482/safety/area.csv")
>>>>>>> deddbfb11bf33c79125c641ba24e3c12407798e7
area <- area[,c(6,8)]
colnames(area) <- c("geo","area")
substr(area$geo[1],1,2)
for(i in 1:length(area$geo)){
area$geo[i] <- substr(area$geo[i],1,2)
}
allpa <- merge(railpa,roadpa,by=c("geo","country","TIME_PERIOD"),all = TRUE)
railaccallpa <- merge(railacc,allpa,by=c("geo","country","TIME_PERIOD"),all=TRUE)
safetyDFALL <- merge(roadacc,railaccallpa,by=c("geo","country","TIME_PERIOD"),all=TRUE)
CRIMerge <- merge(safetyDFALL,CRI,by="country")
GDPMerge <- merge(CRIMerge,GDPLong,by=c("country","TIME_PERIOD"),all=TRUE)
<<<<<<< HEAD
View(safetyDF)
=======
>>>>>>> deddbfb11bf33c79125c641ba24e3c12407798e7
areaMerge <- merge(GDPMerge,area,by="geo",all=TRUE)
safetyDF <- areaMerge[complete.cases(areaMerge),]
safetyDF$roadAccByVol <- safetyDF$`road accidents` / safetyDF$`road passengers (millions passenger-kilometers)`
safetyDF$railAccByVol <- safetyDF$`rail accidents` / safetyDF$`rail passengers (millions passenger-kilometers)`
safetyDF$ratio <- safetyDF$roadAccByVol / safetyDF$railAccByVol
safetyByYear <- safetyDF %>%
group_by(TIME_PERIOD) %>%
summarise(across(c(`road accidents`,`road passengers (millions passenger-kilometers)`,`rail accidents`,`rail passengers (millions passenger-kilometers)`),sum))
safetyByYear$roadAccByVol <- safetyByYear$`road accidents`/ safetyByYear$`road passengers (millions passenger-kilometers)`
safetyByYear$railAccByVol <- safetyByYear$`rail accidents` / safetyByYear$`rail passengers (millions passenger-kilometers)`
safetyByYear$ratio <- safetyByYear$roadAccByVol / safetyByYear$railAccByVol
plot(safetyByYear$TIME_PERIOD, safetyByYear$roadAccByVol,type="l",col="red",ylim=c(0,0.009),xlab="Year", ylab="accidents by volume",main="Fig 2.1")
lines(safetyByYear$TIME_PERIOD, safetyByYear$railAccByVol,type="l",col="blue")
points(safetyByYear$TIME_PERIOD, safetyByYear$roadAccByVol,col="red",pch=19)
points(safetyByYear$TIME_PERIOD, safetyByYear$railAccByVol,col="blue",pch=19)
legend("topright",legend=c("Road Accidents by Volume", "Rail Accidents by Volume"),col=c("red","blue"),pch=c(19,19))
<<<<<<< HEAD
=======
safetyByGeo$roadAccByVol <- safetyByGeo$`road accidents` / safetyByGeo$`road passengers (millions passenger-kilometers)`
safetyByGeo$railAccByVol <- safetyByGeo$`rail accidents` / safetyByGeo$`rail passengers (millions passenger-kilometers)`
safetyByGeo$ratio <- safetyByGeo$roadAccByVol / safetyByGeo$railAccByVol
top5 <- order(safetyByGeo$ratio, decreasing = TRUE)[1:5]
safetyByGeo$roadAccByVol[top5]
safetyByGeo$geo[top5]
safetyByGeo$railAccByVol[top5]
ncol(rbind(safetyByGeo$roadAccByVol[top5],safetyByGeo$railAccByVol[top5]))
library(dplyr)
colnames(railacc)[4] <- "rail accidents"
library(dplyr)
library(plotrix)
rm(list=ls())
railpa <- read.csv("C:/Users/troll/Documents/STAT482/safety/railpa.csv")
railpa <- railpa[,c(8,10,12)]
colnames(railpa)[3] <- "rail passengers (millions passenger-kilometers)"
roadpa <- read.csv("C:/Users/troll/Documents/STAT482/safety/roadpa.csv")
roadpa <- roadpa[,c(10,12,14)]
colnames(roadpa)[3] <- "road passengers (millions passenger-kilometers)"
railacc <- read.csv("C:/Users/troll/Documents/STAT482/safety/railaccidents.csv")
railacc <- railacc[,c(14,16,18)]
colnames(railacc)[3] <- "rail accidents"
roadacc <- read.csv("C:/Users/troll/Documents/STAT482/safety/roadaccidents.csv")
roadacc <- roadacc[,c(10,12,14)]
colnames(roadacc)[3] <- "road accidents"
allpa <- merge(railpa,roadpa,by=c("geo","TIME_PERIOD"),all = TRUE)
railaccallpa <- merge(railacc,allpa,by=c("geo","TIME_PERIOD"),all=TRUE)
safetyDFALL <- merge(roadacc,railaccallpa,by=c("geo","TIME_PERIOD"),all=TRUE)
safetyDF <- safetyDFALL[complete.cases(safetyDFALL),]
safetyDF$roadAccByVol <- safetyDF$`road accidents` / safetyDF$`road passengers (millions passenger-kilometers)`
safetyDF$railAccByVol <- safetyDF$`rail accidents` / safetyDF$`rail passengers (millions passenger-kilometers)`
safetyDF$ratio <- safetyDF$roadAccByVol / safetyDF$railAccByVol
safetyByYear <- safetyDF %>%
group_by(TIME_PERIOD) %>%
summarise(across(c(`road accidents`,`road passengers (millions passenger-kilometers)`,`rail accidents`,`rail passengers (millions passenger-kilometers)`),sum))
safetyByYear$roadAccByVol <- safetyByYear$`road accidents`/ safetyByYear$`road passengers (millions passenger-kilometers)`
safetyByYear$railAccByVol <- safetyByYear$`rail accidents` / safetyByYear$`rail passengers (millions passenger-kilometers)`
safetyByYear$ratio <- safetyByYear$roadAccByVol / safetyByYear$railAccByVol
plot(safetyByYear$TIME_PERIOD, safetyByYear$roadAccByVol,type="l",col="red",ylim=c(0,0.009),xlab="Year", ylab="accidents by volume",main="Fig 2.1")
lines(safetyByYear$TIME_PERIOD, safetyByYear$railAccByVol,type="l",col="blue")
points(safetyByYear$TIME_PERIOD, safetyByYear$roadAccByVol,col="red",pch=19)
points(safetyByYear$TIME_PERIOD, safetyByYear$railAccByVol,col="blue",pch=19)
legend("topright",legend=c("Road Accidents by Volume", "Rail Accidents by Volume"),col=c("red","blue"),pch=c(19,19))
>>>>>>> deddbfb11bf33c79125c641ba24e3c12407798e7
safetyByGeo <- safetyDF %>%
group_by(geo) %>%
summarise(across(c(`road accidents`,`road passengers (millions passenger-kilometers)`,`rail accidents`,`rail passengers (millions passenger-kilometers)`),sum))
safetyByGeo$roadAccByVol <- safetyByGeo$`road accidents` / safetyByGeo$`road passengers (millions passenger-kilometers)`
safetyByGeo$railAccByVol <- safetyByGeo$`rail accidents` / safetyByGeo$`rail passengers (millions passenger-kilometers)`
safetyByGeo$ratio <- safetyByGeo$roadAccByVol / safetyByGeo$railAccByVol
top5 <- order(safetyByGeo$ratio, decreasing = TRUE)[1:5]
safetyByGeo$roadAccByVol[top5]
safetyByGeo$geo[top5]
safetyByGeo$railAccByVol[top5]
ncol(rbind(safetyByGeo$roadAccByVol[top5],safetyByGeo$railAccByVol[top5]))
length(safetyByGeo$geo[top5])
par(mfrow = c(1,2))
barplot( rbind(safetyByGeo$roadAccByVol[top5],safetyByGeo$railAccByVol[top5]),
<<<<<<< HEAD
names.arg=paste0(safetyByGeo$geo[top5],"/n",round(safetyByGeo$ratio[top5],digits=3)),
=======
names.arg=paste0(safetyByGeo$geo[top5],"\n",round(safetyByGeo$ratio[top5],digits=3)),
>>>>>>> deddbfb11bf33c79125c641ba24e3c12407798e7
beside = TRUE, col=c("red","blue"), legend.text=c("Road Acc by Volume", "Rail Acc by Volume"),
args.legend = list(x = "topleft"),main="Fig 2.2")
bot5 <- order(safetyByGeo$ratio, decreasing = FALSE)[1:5]
safetyByGeo$roadAccByVol[bot5]
safetyByGeo$geo[bot5]
safetyByGeo$railAccByVol[bot5]
ncol(rbind(safetyByGeo$roadAccByVol[bot5],safetyByGeo$railAccByVol[bot5]))
length(safetyByGeo$geo[bot5])
barplot( rbind(safetyByGeo$roadAccByVol[bot5],safetyByGeo$railAccByVol[bot5]),
<<<<<<< HEAD
names.arg=paste0(safetyByGeo$geo[bot5],"/n",round(safetyByGeo$ratio[bot5],digits=3)),
=======
names.arg=paste0(safetyByGeo$geo[bot5],"\n",round(safetyByGeo$ratio[bot5],digits=3)),
>>>>>>> deddbfb11bf33c79125c641ba24e3c12407798e7
beside = TRUE, col=c("red","blue"), legend.text=c("Road Acc by Volume", "Rail Acc by Volume"),
args.legend = list(x = "topright"),main="Fig 2.3")
safetyyrsplit <- split(safetyDF,safetyDF$TIME_PERIOD)
safetyt <- function(df){
return(t.test(df$ratio,mu=1,alternative="greater"))
}
safetyt2side <- function(df){
return(t.test(df$ratio,mu=1))
}
tlist <- sapply(safetyyrsplit,safetyt)
tsig <- tlist[3,] < 0.05
tlist2side <- sapply(safetyyrsplit,safetyt2side)
<<<<<<< HEAD
viztable <-cbind(tlist[3,],tsig,tlist[2,],tlist2side[4,])
colnames(viztable) <- c("p val", "significant", "n-1","confidence interval")
safetyyrsplit[["2009"]]
write.csv(viztable, "C:/Users/Saketh/Documents/STAT482/safety/viztable.csv")
fixtable <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/viztablemodded.csv")
fixtable <- fixtable %>%
rowwise() %>%
mutate(CI = list(c(lowlevel,highlevel))) %>%
ungroup()
par(mfrow=c(1,1))
plot(safetyByYear$TIME_PERIOD,safetyByYear$ratio,ylim=c(0,6),type="l",col="red",main="Ratio by Year")
points(safetyByYear$TIME_PERIOD,safetyByYear$ratio,col="red",pch=19)
abline(h=1,lty=2)
segments(x0 = fixtable$year,y0 = fixtable$lowlevel, y1=fixtable$highlevel,col = "blue", lwd = 2)
arrows(x0 = fixtable$year,y0 = fixtable$lowlevel, y1=fixtable$highlevel,col = "blue", angle = 90, code = 3, length = 0.05, lwd=2)
View(safetyByYear)
View(safetyDF)
safetyDF$TIME_PERIOD == 2006
safetyDF[safetyDF$TIME_PERIOD == 2006,]
View(safetyByYear)
safetyDF[safetyDF$TIME_PERIOD == 2006,]
safetyDF[safetyDF$TIME_PERIOD == 2006,]$ratio
mean(safetyDF[safetyDF$TIME_PERIOD == 2006,]$ratio)
mean(safetyDF[safetyDF$TIME_PERIOD == 2008,]$ratio)
View(safetyDF)
safetyByYear <- safetyDF %>%
group_by(TIME_PERIOD) %>%
summarise(across(c(`road accidents`,`road passengers (millions passenger-kilometers)`,`rail accidents`,`rail passengers (millions passenger-kilometers)`),sum)) %>%
summarise(across(c(`ratio`),mean))
View(safetyDF)
safetyByYear <- safetyDF %>%
group_by(TIME_PERIOD) %>%
summarise(across(c(`road accidents`,`road passengers (millions passenger-kilometers)`,`rail accidents`,`rail passengers (millions passenger-kilometers)`),sum),
ratio = mean(`ratio`, na.rm=TRUE))
safetyByYear$roadAccByVol <- safetyByYear$`road accidents`/ safetyByYear$`road passengers (millions passenger-kilometers)`
safetyByYear$railAccByVol <- safetyByYear$`rail accidents` / safetyByYear$`rail passengers (millions passenger-kilometers)`
safetyByYear$ratio <- safetyByYear$roadAccByVol / safetyByYear$railAccByVol
safetyByYear <- safetyDF %>%
group_by(TIME_PERIOD) %>%
summarise(across(c(`road accidents`,`road passengers (millions passenger-kilometers)`,`rail accidents`,`rail passengers (millions passenger-kilometers)`),sum),
ratio = mean(`ratio`, na.rm=TRUE))
safetyByYear$roadAccByVol <- safetyByYear$`road accidents`/ safetyByYear$`road passengers (millions passenger-kilometers)`
safetyByYear$railAccByVol <- safetyByYear$`rail accidents` / safetyByYear$`rail passengers (millions passenger-kilometers)`
View(safetyByYear)
plot(safetyByYear$TIME_PERIOD,safetyByYear$ratio,ylim=c(0,6),type="l",col="red",main="Ratio by Year")
points(safetyByYear$TIME_PERIOD,safetyByYear$ratio,col="red",pch=19)
abline(h=1,lty=2)
segments(x0 = fixtable$year,y0 = fixtable$lowlevel, y1=fixtable$highlevel,col = "blue", lwd = 2)
arrows(x0 = fixtable$year,y0 = fixtable$lowlevel, y1=fixtable$highlevel,col = "blue", angle = 90, code = 3, length = 0.05, lwd=2)
=======
viztable <-cbind(colnames(tlist),tlist[3,],tsig,tlist[2,],tlist2side[4,])
colnames(viztable) <- c("year","p val", "significant", "n-1","confidence interval")
safetyyrsplit[["2010"]]
par(mfrow=c(1,1))
plot(safetyByYear$TIME_PERIOD,safetyByYear$ratio,ylim=c(-1,10),type="l",col="red")
points(safetyByYear$TIME_PERIOD,safetyByYear$ratio,col="red",pch=19)
abline(h=1,lty=2)
points(safetyDF$TIME_PERIOD,safetyDF$ratio,col=factor(safetyDF$geo))
source("C:/Users/troll/Documents/STAT482/safety/capsafety.R")
library(dplyr)
colnames(railacc)[4] <- "rail accidents"
roadacc <- read.csv("C:/Users/Saketh/Documents/STAT482/safety/roadaccidents.csv")
source("C:/Users/troll/Documents/STAT482/safety/capsafety.R")
source("C:/Users/troll/Documents/STAT482/safety/capsafety.R")
source("C:/Users/troll/Documents/STAT482/safety/capsafety.R")
source("C:/Users/troll/Documents/STAT482/safety/capsafety.R")
<<<<<<< HEAD
library(lme4)
library(lmertest)
install.packages("lmerTest")
library(lmerTest)
source("C:/Users/troll/Documents/STAT482/safety/capsafety.R")
View(safetyByYear)
View(safetyDF)
lin0 <- lmer(ratio ~ 1 + (gdp | geo),data=safetyDF)
source("C:/Users/troll/Documents/STAT482/safety/capsafety.R")
oo <- options(repos = "https://cran.r-project.org/")
utils::install.packages("Matrix")
utils::install.packages("lme4")
options(oo)
library(lme4)
remove.packages("Matrix")
remove.packages("lme4")
install.packages("lme4", type = "source")
library(lme4)
library(lmerTest)
lin0 <- lmer(ratio ~ 1 + (gdp | geo),data=safetyDF)
lin0 <- lmer(ratio ~ 1 + (1 | gdp),data=safetyDF)
lin0 <- lmer(ratio ~ gdp + (1 | geo),data=safetyDF)
library(lme4)
library(lmerTest)
lin0 <- lmer(ratio ~ gdp + (1 | geo),data=safetyDF)
lin0
lin0 <- lmer(ratio ~1 + (1 | gdp) + (1 | geo),data=safetyDF)
lin0 <- lmer(ratio ~1 + (gdp | geo) + (1 | geo),data=safetyDF)
library(lme4)
library(lmerTest)
lin0 <- lmer(ratio ~1 + (gdp | geo) + (1 | geo),data=safetyDF)
lin0
length(unique(safetyDF$gdp))
lin0 <- lmer(ratio ~ (gdp | geo) + (1 | geo),data=safetyDF)
lin0
help('isSingular')
lin0 <- lmer(ratio ~ (gdp | geo),data=safetyDF)
lin0
lin0 <- lmer(ratio ~ area + (gdp | geo),data=safetyDF)
library(lme4)
library(lmerTest)
lin0 <- lmer(ratio ~ area + (gdp | geo) + (1 | geo),data=safetyDF)
lin0
lin0 <- lmer(ratio ~ area + CRI.score + (gdp | geo) + (1 | geo),data=safetyDF)
library(lme4)
library(lmerTest)
lin0 <- lmer(ratio ~ area + CRI.score + (gdp | geo) + (1 | geo),data=safetyDF)
lin0
library(lme4)
library(lmerTest)
lin0 <- lmer(ratio ~ area + CRI.score + (gdp | geo) + (1 | geo),data=safetyDF,REML = TRUE)
lin0
lin0 <- lmer(ratio ~ area + CRI.score + (gdp | geo) + (1 | geo),data=safetyDF,REML = false)
lin0 <- lmer(ratio ~ area + CRI.score + (gdp | geo) + (1 | geo),data=safetyDF,REML = FALSE)
lin0
library(lme4)
library(lmerTest)
lin0 <- lmer(ratio ~ area + CRI.score + geo + (gdp | geo) ,data=safetyDF,REML = FALSE)
lin0
library(lme4)
library(lmerTest)
lin0 <- lmer(ratio ~ area + CRI.score + (gdp | geo) ,data=safetyDF,REML = FALSE)
lin0
source("C:/Users/troll/Documents/STAT482/safety/capsafety.R")
lin0
lin0 <- lmer(ratio ~ gdp + area + CRI.score + (gdp | geo) ,data=safetyDF,REML = FALSE)
lin0
lin0 <- lmer(ratio ~ gdp + area + CRI.score + (gdp + CRI.score | geo) ,data=safetyDF,REML = FALSE)
lin0
library(lme4)
library(lmerTest)
lin0 <- lmer(ratio ~ gdp + area + CRI.score + (gdp + CRI.score | geo) ,data=safetyDF,REML = FALSE)
lin0
lin0 <- lmer(ratio ~ gdp + area + CRI.score + (gdp + CRI.score | geo) ,data=safetyDF,REML = TRUE)
lin0
lin0 <- lmer(ratio ~ gdp + area + CRI.score + (gdp + CRI.score | geo) ,data=safetyDF)
lin0
lin0 <- lmer(ratio ~ gdp + area + CRI.score + (gdp + CRI.score | geo) ,data=safetyDF,control = lmerControl(optimizer ="Nelder_Mead")
lin0 <- lmer(ratio ~ gdp + area + CRI.score + (gdp + CRI.score | geo) ,data=safetyDF,control = lmerControl(optimizer ="Nelder_Mead"))
lin0 <- lmer(ratio ~ gdp + area + CRI.score + (gdp + CRI.score | geo) ,data=safetyDF,control = lmerControl(optimizer ="Nelder_Mead"))
lin0 <- lmer(ratio ~ gdp + area + CRI.score + (gdp + CRI.score | geo) ,data=safetyDF,control = lmerControl(optimizer ="Nelder_Mead"),REML = FALSE)
lin0
lin0 <- lmer(ratio ~ gdp + area + CRI.score + (gdp + CRI.score | geo) ,data=safetyDF)
library(lmerTest)
lin0 <- lmer(ratio ~ gdp + area + CRI.score + (gdp + CRI.score | geo) ,data=safetyDF)
lin0
lin0 <- lmer(ratio ~ gdp + (gdp | geo) ,data=safetyDF)
lin0
lin0 <- lmer(ratio ~ gdp + (gdp | geo) ,data=safetyDF)
lin0
lin0 <- lmer(ratio ~ gdp + (gdp | geo) ,data=safetyDF, REML = FALSE)
lin0 <- lmer(ratio ~ gdp + area + CRI.score + (gdp + CRI.score | geo) ,data=safetyDF,REML = FALSE)
lin0 <- lmer(ratio ~ gdp + (gdp | geo) ,data=safetyDF, REML = FALSE)
lin0
safetyDF$gdp <- safetyDF$gdp * 1000000
lin0 <- lmer(ratio ~ gdp + area + CRI.score + (gdp + CRI.score | geo) ,data=safetyDF,REML = FALSE)
lin0 <- lmer(ratio ~ gdp + (gdp | geo) ,data=safetyDF, REML = FALSE)
lin0
lin0 <- lmer(ratio ~ gdp + area + CRI.score + (gdp + CRI.score | geo) ,data=safetyDF,REML = FALSE)
lin0 <- lmer(ratio ~ gdp + area + CRI.score + (gdp + CRI.score | geo) ,data=safetyDF)
lin0 <- lmer(ratio ~ gdp + (gdp | geo) ,data=safetyDF)
, REML = FALSE
, REML = FALSE
lin0 <- lmer(ratio ~ gdp + (gdp | geo) ,data=safetyDF, REML = FALSE)
lin0
lin0 <- lmer(ratio ~ gdp + (gdp | geo) ,data=safetyDF, REML = FALSE)
lin0 <- lmer(ratio ~ gdp + area + CRI.score + (gdp + CRI.score | geo) ,data=safetyDF)
lin0 <- lmer(ratio ~ 1 + (gdp | geo) ,data=safetyDF)
lin0
warnings()
lin0 <- lmer(ratio ~ gdp + (gdp | geo) ,data=safetyDF)
sum(gdp < 0)
sum(safetyDF$gdp < 0)
source("C:/Users/troll/Documents/STAT482/safety/capsafety.R")
lin0
lin1
lin2
lin0 <- lmer(ratio ~ area + CRI.score + (gdp + CRI.score | geo) ,data=safetyDF)
lin0
lin0 <- lmer(ratio ~ area + (gdp + CRI.score | geo) ,data=safetyDF)
lin0
lin0 <- lmer(ratio ~ (! | geo) + (gdp + CRI.score | geo) ,data=safetyDF)
lin0 <- lmer(ratio ~ (1 | geo) + (gdp + CRI.score | geo) ,data=safetyDF)
lin0
lin0 <- lmer(ratio ~  (gdp | geo) ,data=safetyDF)
lin0
lin3 <- lmer(ratio ~ 1 + (1 | geo), data=safetyDF)
lin3
lin0 <- lmer(ratio ~  area + CRI.score + (gdp | geo) ,data=safetyDF)
lin0
lin0 <- lmer(ratio ~  area + CRI.score + (gdp | geo) ,data=safetyDF, REML = FALSE)
lin0 <- lmer(ratio ~  area + CRI.score + (gdp | geo) ,data=safetyDF, REML = TRUE)
lin2 <- lmer(ratio ~ 1 + (gdp | geo) ,data=safetyDF)
lin2
lin0 <- lmer(ratio ~  area + CRI.score + (gdp | geo) ,data=safetyDF, REML = TRUE)
lin0
lin0 <- lmer(ratio ~  area + CRI.score + (gdp | geo) ,data=safetyDF, REML = FALSE)
lin0
lin1 <- lmer(ratio ~ gdp + (1 | geo) ,data=safetyDF)
lin1
safetyDF$gdp <- log(safetyDF$gdp)
lin0 <- lmer(ratio ~  area + CRI.score + (gdp | geo) ,data=safetyDF, REML = FALSE)
lin0
safetyDF$gdp <- log(safetyDF$gdp)
safetyDF$area <-log(safetyDF$area)
source("C:/Users/troll/Documents/STAT482/safety/capsafety.R")
lin0 <- lmer(ratio ~  area + CRI.score + (gdp | geo) ,data=safetyDF, REML = FALSE)
lin0 <- lmer(ratio ~  area + CRI.score + gdp + (1 | geo) ,data=safetyDF, REML = FALSE)
lin0
summary(lin0)
lin0 <- lmer(ratio ~  area + CRI.score + gdp + (1 | geo) ,data=safetyDF)
lin0
summary(lin0)
lin1 <- lmer(ratio ~  area + CRI.score + gdp + (gdp | geo) ,data=safetyDF)
lin1
lin1 <- lmer(ratio ~  area + CRI.score + gdp + (gdp || geo) ,data=safetyDF)
lin1
summary(lin1)
anova(lin0,lin1)
lin2 <- lmer(ratio ~  area + CRI.score + gdp + (-1 + gdp | geo) ,data=safetyDF)
lin2
summary(lin2)
source("C:/Users/troll/Documents/STAT482/safety/capsafety.R")
=======
>>>>>>> deddbfb11bf33c79125c641ba24e3c12407798e7
>>>>>>> 3196d8a12c7056b86411c197eda1a3eacbdc1f1f
